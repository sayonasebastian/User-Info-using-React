{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Home\\\\Desktop\\\\Sayo\\\\CloudComputing\\\\User-Info-using-React\\\\src\\\\components\\\\Forms\\\\FormContainer.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport Login from \"./Login\";\nimport RegisterUser from \"./RegisterUser\";\nimport UserInfo from \"./UserInfo\";\nimport file from \"../../docs/Limerick.txt\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Form extends React.Component {\n  constructor() {\n    super();\n    this.clearState = () => {\n      this.setState({\n        ...this.initialState\n      });\n    };\n    this.readFile1 = async e => {\n      e.preventDefault();\n      const file = new FileReader();\n      file.onload = async e => {\n        var text = e.target.result.split(new RegExp([\" \", \"\\n\"].join('|'), 'g'));\n        this.setState({\n          count: text.length\n        });\n      };\n      file.readAsText(e.target.files[0]);\n    };\n    this.initialState = {\n      username: \"\",\n      password: \"\",\n      fname: \"\",\n      lname: \"\",\n      email: \"\",\n      mode: \"Login\",\n      file: \"\",\n      count: \"0\"\n    };\n    this.state = this.initialState;\n    this.createUser = this.createUser.bind(this);\n    this.clearState = this.clearState.bind(this);\n    this.handleBack = this.handleBack.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleRegister = this.handleRegister.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleMode = this.handleMode.bind(this);\n    this.retriveInfo = this.retriveInfo.bind(this);\n    this.currentHost = `${window.location.protocol}//${window.location.hostname}`;\n    this.readFile = this.readFile.bind(this);\n  }\n  handleChange(event) {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = event.target;\n    type === \"checkbox\" ? this.setState({\n      [name]: checked\n    }) : this.setState({\n      [name]: value\n    });\n  }\n  handleBack(modeCurrent) {\n    this.clearState();\n    this.handleMode(modeCurrent);\n  }\n  handleMode(modeCurrent) {\n    this.setState({\n      mode: modeCurrent\n    });\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    this.retriveInfo();\n  }\n  handleRegister(event) {\n    event.preventDefault();\n    this.readFile();\n  }\n  readFile() {\n    fetch(file).then(r => {\n      this.setState({\n        file: r.url\n      });\n      return r.text();\n    }).then(text => {\n      var arr = text.split(new RegExp([\" \", \"\\n\"].join('|'), 'g'));\n      this.setState({\n        count: arr.length.toString()\n      });\n    }).then(e => {\n      this.createUser();\n      this.clearState();\n      this.handleMode(\"Login\");\n    });\n  }\n  createUser() {\n    axios.post(`${this.currentHost}:5001/users/create`, {\n      username: this.state.username,\n      password: this.state.password,\n      fname: this.state.fname,\n      lname: this.state.lname,\n      email: this.state.email,\n      file: this.state.file,\n      count: this.state.count\n    }).then(res => {\n      console.log(res.data);\n    }).catch(error => console.error(`Error: ${error}`));\n  }\n  retriveInfo() {\n    axios.put(`${this.currentHost}:5001/users/check`, {\n      username: this.state.username,\n      password: this.state.password\n    }).then(response => {\n      if (response.data.length > 0) {\n        let info = response.data[0];\n        if (response.data[0].password === this.state.password) {\n          this.handleMode(\"Info\");\n          this.setState({\n            fname: info.fname,\n            lname: info.lname,\n            email: info.email,\n            count: info.count,\n            file: info.file\n          });\n        } else alert(\"Invalid password\");\n      } else this.handleMode(\"Register\");\n    }).catch(error => console.error(`User list unavialable: ${error}`));\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: this.state.mode === \"Login\" ? /*#__PURE__*/_jsxDEV(Login, {\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        state: this.state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 48\n      }, this) : this.state.mode === \"Register\" ? /*#__PURE__*/_jsxDEV(RegisterUser, {\n        handleChange: this.handleChange,\n        handleRegister: this.handleRegister,\n        handleBack: this.handleBack,\n        state: this.state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 56\n      }, this) : /*#__PURE__*/_jsxDEV(UserInfo, {\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        handleBack: this.handleBack,\n        state: this.state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 22\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default Form;","map":{"version":3,"names":["React","axios","Login","RegisterUser","UserInfo","file","Form","Component","constructor","clearState","setState","initialState","readFile1","e","preventDefault","FileReader","onload","text","target","result","split","RegExp","join","count","length","readAsText","files","username","password","fname","lname","email","mode","state","createUser","bind","handleBack","handleChange","handleRegister","handleSubmit","handleMode","retriveInfo","currentHost","window","location","protocol","hostname","readFile","event","name","value","type","checked","modeCurrent","fetch","then","r","url","arr","toString","post","res","console","log","data","catch","error","put","response","info","alert","render"],"sources":["C:/Users/Home/Desktop/Sayo/CloudComputing/User-Info-using-React/src/components/Forms/FormContainer.js"],"sourcesContent":["import React from \"react\"\r\nimport axios from 'axios'\r\nimport Login from \"./Login\"\r\nimport RegisterUser from \"./RegisterUser\"\r\nimport UserInfo from \"./UserInfo\"\r\nimport file from \"../../docs/Limerick.txt\"\r\n\r\nclass Form extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.initialState = {\r\n            username: \"\",\r\n            password: \"\",\r\n            fname: \"\",\r\n            lname: \"\",\r\n            email: \"\",\r\n            mode: \"Login\",\r\n            file: \"\",\r\n            count: \"0\"\r\n        }\r\n        this.state = this.initialState;\r\n        this.createUser = this.createUser.bind(this)\r\n        this.clearState = this.clearState.bind(this)\r\n        this.handleBack = this.handleBack.bind(this)\r\n        this.handleChange = this.handleChange.bind(this)\r\n        this.handleRegister = this.handleRegister.bind(this)\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n        this.handleMode = this.handleMode.bind(this)\r\n        this.retriveInfo = this.retriveInfo.bind(this)\r\n        this.currentHost = `${window.location.protocol}//${window.location.hostname}`\r\n        this.readFile = this.readFile.bind(this)\r\n    }\r\n\r\n    handleChange(event) {\r\n        const { name, value, type, checked } = event.target\r\n        type === \"checkbox\" ? this.setState({ [name]: checked }) : this.setState({\r\n            [name]: value\r\n        })\r\n    }\r\n\r\n    handleBack(modeCurrent) {\r\n        this.clearState();\r\n        this.handleMode(modeCurrent);\r\n    }\r\n\r\n    handleMode(modeCurrent) {\r\n        this.setState({ mode: modeCurrent });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        this.retriveInfo();\r\n    }\r\n\r\n    handleRegister(event) {\r\n        event.preventDefault();\r\n        this.readFile();\r\n    }\r\n\r\n    clearState = () => {\r\n        this.setState({ ...this.initialState });\r\n    }\r\n\r\n    readFile1 = async (e) => {\r\n        e.preventDefault();\r\n        const file = new FileReader()\r\n        file.onload = async (e) => {\r\n            var text = (e.target.result).split(new RegExp([\" \", \"\\n\"].join('|'), 'g'));\r\n            this.setState({ count: text.length })\r\n        };\r\n        file.readAsText(e.target.files[0])\r\n    }\r\n\r\n    readFile() {\r\n        fetch(file)\r\n            .then(r => {\r\n                this.setState({ file: r.url })\r\n                return r.text()\r\n            })\r\n            .then(text => {\r\n                var arr = text.split(new RegExp([\" \", \"\\n\"].join('|'), 'g'));\r\n                this.setState({ count: arr.length.toString() });\r\n            })\r\n            .then(e => {\r\n                this.createUser();\r\n                this.clearState();\r\n                this.handleMode(\"Login\");\r\n            });\r\n    }\r\n\r\n    createUser() {\r\n\r\n        axios\r\n            .post(`${this.currentHost}:5001/users/create`, {\r\n                username: this.state.username,\r\n                password: this.state.password,\r\n                fname: this.state.fname,\r\n                lname: this.state.lname,\r\n                email: this.state.email,\r\n                file: this.state.file,\r\n                count: this.state.count\r\n            })\r\n            .then(res => {\r\n                console.log(res.data)\r\n            })\r\n            .catch(error => console.error(`Error: ${error}`))\r\n    }\r\n\r\n    retriveInfo() {\r\n        axios\r\n            .put(`${this.currentHost}:5001/users/check`, {\r\n                username: this.state.username,\r\n                password: this.state.password\r\n            })\r\n            .then(response => {\r\n                if (response.data.length > 0) {\r\n                    let info = response.data[0];\r\n                    if (response.data[0].password === this.state.password) {\r\n                        this.handleMode(\"Info\");\r\n                        this.setState({ fname: info.fname, lname: info.lname, email: info.email, count: info.count, file: info.file });\r\n                    } else alert(\"Invalid password\");\r\n\r\n                } else this.handleMode(\"Register\");\r\n            })\r\n            .catch(error => console.error(`User list unavialable: ${error}`))\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                {this.state.mode === \"Login\" ? <Login\r\n                    handleChange={this.handleChange}\r\n                    handleSubmit={this.handleSubmit}\r\n                    state={this.state}\r\n                /> : (this.state.mode === \"Register\" ? <RegisterUser\r\n                    handleChange={this.handleChange}\r\n                    handleRegister={this.handleRegister}\r\n                    handleBack={this.handleBack}\r\n                    state={this.state}\r\n                /> : <UserInfo\r\n                    handleChange={this.handleChange}\r\n                    handleSubmit={this.handleSubmit}\r\n                    handleBack={this.handleBack}\r\n                    state={this.state}\r\n                />)}\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default Form"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}